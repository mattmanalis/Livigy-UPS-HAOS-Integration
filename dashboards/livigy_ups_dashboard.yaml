title: Livigy UPS
views:
  - title: UPS Overview
    path: livigy-ups
    icon: mdi:battery-high
    badges: []
    cards:
      - type: markdown
        content: |
          # Livigy UPS Dashboard
          Entity IDs mapped to your current Livigy UPS entities.

      - type: glance
        title: Live Status
        columns: 4
        entities:
          - entity: sensor.input_voltage
            name: Input V
          - entity: sensor.output_voltage
            name: Output V
          - entity: sensor.ups_load
            name: Load %
          - entity: sensor.estimated_load_watts
            name: Load W (Est)
          - entity: sensor.battery_voltage
            name: Battery V
          - entity: sensor.input_frequency
            name: Hz
          - entity: sensor.ups_temperature
            name: Temp
          - entity: sensor.fault_voltage
            name: Fault V
          - entity: binary_sensor.utility_fail
            name: Utility Fail
          - entity: binary_sensor.battery_low
            name: Battery Low
          - entity: binary_sensor.adapter_connected
            name: Adapter Connected
          - entity: binary_sensor.ups_responding
            name: UPS Responding

      - type: entities
        title: UPS Identity And Ratings
        show_header_toggle: false
        entities:
          - entity: sensor.ups_company
          - entity: sensor.ups_model
          - entity: sensor.ups_firmware
          - entity: sensor.rated_voltage
          - entity: sensor.rated_current
          - entity: sensor.rated_battery_voltage
          - entity: sensor.rated_frequency

      - type: entities
        title: UPS Status Bits
        show_header_toggle: false
        entities:
          - entity: binary_sensor.adapter_connected
          - entity: binary_sensor.ups_responding
          - entity: binary_sensor.utility_fail
          - entity: binary_sensor.battery_low
          - entity: binary_sensor.avr_active
          - entity: binary_sensor.ups_failed
          - entity: binary_sensor.standby_type
          - entity: binary_sensor.test_in_progress
          - entity: binary_sensor.shutdown_active
          - entity: binary_sensor.beeper_on

      - type: grid
        title: Load Gauges
        columns: 2
        square: false
        cards:
          - type: gauge
            entity: sensor.ups_load
            name: Load Percent
            min: 0
            max: 100
            severity:
              green: 0
              yellow: 60
              red: 85
          - type: gauge
            entity: sensor.estimated_load_watts
            name: Load Watts (Estimated)
            min: 0
            max: 2500
            severity:
              green: 0
              yellow: 1200
              red: 1800

      - type: history-graph
        title: Input Voltage (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.input_voltage
            name: Input Voltage

      - type: history-graph
        title: Output Voltage (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.output_voltage
            name: Output Voltage

      - type: history-graph
        title: Fault Voltage (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.fault_voltage
            name: Fault Voltage

      - type: history-graph
        title: Battery Voltage (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.battery_voltage
            name: Battery Voltage

      - type: history-graph
        title: Load Percent (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.ups_load
            name: Load %

      - type: history-graph
        title: Load Watts Estimated (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.estimated_load_watts
            name: Load W

      - type: history-graph
        title: Input Frequency (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.input_frequency
            name: Input Hz

      - type: history-graph
        title: Temperature (24h)
        hours_to_show: 24
        refresh_interval: 60
        entities:
          - entity: sensor.ups_temperature
            name: UPS Temp

      - type: entities
        title: Control Actions
        show_header_toggle: false
        entities:
          - type: button
            name: Toggle Beeper
            icon: mdi:volume-high
            tap_action:
              action: call-service
              service: livigy_ups.toggle_beeper

          - type: button
            name: Start 10s Battery Test
            icon: mdi:battery-sync
            tap_action:
              action: call-service
              service: livigy_ups.start_battery_test

          - type: button
            name: Start 5 Min Battery Test
            icon: mdi:battery-clock
            tap_action:
              action: call-service
              service: livigy_ups.start_battery_test
              service_data:
                minutes: 5

          - type: button
            name: Start Test Until Low
            icon: mdi:battery-alert
            tap_action:
              action: call-service
              service: livigy_ups.start_battery_test
              service_data:
                until_low: true

          - type: button
            name: Cancel Battery Test
            icon: mdi:cancel
            tap_action:
              action: call-service
              service: livigy_ups.cancel_battery_test

          - type: button
            name: Schedule Shutdown in 5 Min
            icon: mdi:power
            tap_action:
              action: call-service
              service: livigy_ups.shutdown
              service_data:
                delay_minutes: 5

          - type: button
            name: Cancel Shutdown
            icon: mdi:power-off
            tap_action:
              action: call-service
              service: livigy_ups.cancel_shutdown

      - type: entities
        title: Advanced Command Buttons
        show_header_toggle: false
        entities:
          - type: button
            name: Poll Q1 (Raw)
            icon: mdi:download-network
            tap_action:
              action: call-service
              service: livigy_ups.send_command
              service_data:
                command: Q1

          - type: button
            name: Poll I (Identity)
            icon: mdi:identifier
            tap_action:
              action: call-service
              service: livigy_ups.send_command
              service_data:
                command: I

          - type: button
            name: Poll F (Ratings)
            icon: mdi:format-list-bulleted
            tap_action:
              action: call-service
              service: livigy_ups.send_command
              service_data:
                command: F
